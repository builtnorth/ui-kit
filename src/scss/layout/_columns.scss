@use "../helpers/index" as *;
@use "sass:math";

/* Columns
---------------------------------------- */

.wp-block-polaris-columns {
	display: flex;
	flex-wrap: nowrap;
	position: relative;
	z-index: 1;

	/* Container query for responsive behavior */
	/* Note: container query looks at nearest ancestor with container-type */
	@container (max-width: 48rem) {
		flex-direction: column;
	}

	/* Media query as fallback */
	@include lt-md() {
		flex-direction: column;
	}

	.wp-block-polaris-column {
		min-width: 4rem;
		flex-direction: column;
		display: flex;
		align-self: stretch;

		/* fix for gutenberg */
		margin-block-start: 0;

		/* Needed for gutenberg - mainly wp-group blocks */
		> * {
			width: 100%;
		}

		&--auto {
			flex: 1;
			width: auto;
		}

		@for $i from 1 through 12 {
			&--span-#{$i} {
				flex-basis: #{math.percentage(math.div($i, 12))};
			}
		}

		&.has-background {
			padding: var(--wp--preset--spacing--50);
		}
	}

	// Mobile Stacking - Override default mobile stacking
	&.no-stack-on-mobile {
		/* Container query override */
		@container (max-width: 48rem) {
			flex-direction: row;
		}

		/* Media query as fallback */
		@include lt-md() {
			flex-direction: row;
		}
	}

	// Handle WordPress-generated is-nowrap class
	&.is-nowrap {
		/* Allow stacking in small containers despite nowrap class */
		@container (max-width: 48rem) {
			flex-direction: column;

			.wp-block-polaris-column {
				width: 100%;
			}
		}

		/* Media query as fallback */
		@include lt-md() {
			flex-direction: column;

			.wp-block-polaris-column {
				width: 100%;
			}
		}
	}
}
